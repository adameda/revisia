{% extends "base.html" %}
{% block title %}Mes résultats{% endblock %}
{% block content %}

<!-- Titre principal -->
<h1 class="text-4xl font-extrabold mb-10 text-center bg-gradient-to-r from-blue-600 to-indigo-500 bg-clip-text text-transparent">
  Mes Résultats
</h1>

<!-- Sélecteur -->
<div class="flex justify-center mb-10">
  <div class="relative w-[420px] max-w-full">
    <select id="documentSelect"
            class="appearance-none w-full px-5 py-2.5 rounded-xl border border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50 text-gray-800 text-base font-medium shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-1 transition truncate">
      {% for doc in documents %}
        <option value="{{ doc.id }}">{{ doc.title }}</option>
      {% endfor %}
    </select>

    <!-- Icône flèche -->
    <svg class="absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-blue-600 pointer-events-none"
         fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
    </svg>
  </div>
</div>

<!-- Bloc du graphique -->
<div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-sm border border-blue-100 p-6 flex flex-col items-center hover:shadow-md hover:border-blue-300 transition chart-container relative overflow-hidden">

  <!-- Effet de halo pastel -->
  <div class="absolute inset-0 bg-gradient-to-br from-blue-50 via-white to-indigo-50 opacity-0 hover:opacity-80 transition duration-500 rounded-2xl pointer-events-none"></div>

  <div class="relative z-10 w-full">
    <canvas id="resultsChart" class="w-full h-96"></canvas>
    <p id="noDataMessage" class="text-center text-gray-500 mt-6 hidden">
      Aucun résultat trouvé pour ce document.
    </p>
  </div>
</div>

<style>
/* Animation d'apparition */
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}
.chart-container {
  animation: fadeUp 0.8s ease-out forwards;
}

/* Apparence du sélecteur (cohérente et visible sans focus) */
select {
  font-family: 'Inter', sans-serif;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-color: transparent;
  border: 1px solid #bfdbfe; /* bordure bleue pâle visible par défaut */
  transition: all 0.2s ease;
}

/* Options dropdown */
select option {
  font-family: 'Inter', sans-serif;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(8px);
  color: #1e293b;
  font-size: 0.95rem;
  padding: 8px;
}

/* Focus avec halo bleu */
select:focus {
  outline: none;
  border-color: #60a5fa;
  box-shadow: 0 0 0 2px #93c5fd60;
}

/* Supprime artefacts Firefox */
select::-moz-focus-inner {
  border: 0;
}
</style>

{% endblock %}
